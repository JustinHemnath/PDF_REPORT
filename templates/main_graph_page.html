{% import 'graph_page.html' as GraphPages %} 
{% import 'index_page.html' as IndexPages %} 
{% import 'chapter_separation_page.html' as ChapterSeparationPage %} 

<html>
    <head>
        <meta charset="utf-8" />
        <!--It is necessary to use the UTF-8 encoding with plotly graphics to get e.g. negative signs to render correctly -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <link rel="stylesheet" type="text/css" href="assets/css1.css" />
        <link rel="stylesheet" type="text/css" href="assets/css2.css" />
        <link rel="stylesheet" type="text/css" href="assets/css3.css" />
        <link rel="stylesheet" type="text/css" href="assets/css4.css" />

        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap"
            rel="stylesheet"
        />
        <link href="https://fonts.googleapis.com/css2?family=Arima:wght@100..700&display=swap" rel="stylesheet">

        {# plotly js min file #}
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/2.33.0/plotly.min.js"
            integrity="sha512-kG/veDBO4Av/ffjTdtEvtsUkVgAisp5MWbymAUc5vJlyZb3WSZ+gEC8cNlAACBzaHQQLTUKqRaNIKeIc44yD6w=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        ></script>
    </head>

    <body>
       <div id="comparative_analysis_pdf_body">
            {% set graph_data_page = graph_data_pages_list[itr_idx] %}
            {% set TOTAL_BOOTHS_PER_CHAPTER = graph_data_page[6] %}
            {% set chapter_num = itr_idx + 1 %}
                {{ ChapterSeparationPage.render(PAGE_NUM=graph_data_page[0][0]["page_number"], chapter_header=METADATA["chapter_header_list"][chapter_header_idx], flag=graph_data_page[3], OR_MATCHING_YEAR=graph_data_page[5], METADATA=METADATA, total_pages=total_pages, CHAPTER_NUM=chapter_num, TOTAL_BOOTHS_PER_CHAPTER=TOTAL_BOOTHS_PER_CHAPTER) }}
                {{ IndexPages.render(index_data_pages=graph_data_page[1], METADATA=METADATA, total_pages=total_pages, flag=graph_data_page[3], OR_MATCHING_YEAR=graph_data_page[5], CHAPTER_NUM=chapter_num, chapter_header=METADATA["chapter_header_list"][chapter_header_idx], TOTAL_BOOTHS_PER_CHAPTER=TOTAL_BOOTHS_PER_CHAPTER) }}
                {{ GraphPages.render(graph_data_pages=graph_data_page[2], METADATA=METADATA, total_pages=total_pages, flag=graph_data_page[3], diff=graph_data_page[4], OR_MATCHING_YEAR=graph_data_page[5], CHAPTER_NUM=chapter_num, chapter_header=METADATA["chapter_header_list"][chapter_header_idx], TOTAL_BOOTHS_PER_CHAPTER=TOTAL_BOOTHS_PER_CHAPTER) }}
        </div>
    </body>
</html>